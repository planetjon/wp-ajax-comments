!function(){var e;if(e=document.getElementById("wac-stub")){var t=e.dataset.postid;if(r(e,"click",".comment-reply-link",(function(e){var t,n,o,r,m;e.preventDefault(),t=e.target,o=(n=t).dataset.commentid,r=n.dataset.belowelement,m=document.getElementById("respond"),document.getElementById("comment_parent").value=o,document.getElementById(r).after(m),document.getElementById(r).scrollIntoView({behavior:"smooth"})})),r(e,"submit","#commentform",(function(e){var t,n,o,r;e.preventDefault(),t=e.target,n=t,o=new FormData(n),(r=document.createElement("div")).style="margin:1em",fetch(n.action,{method:n.method,redirect:"manual",body:o}).then((function(e){return e.status?e.OK?e.text().then((function(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelector(".wp-die-message").innerText;return Promise.resolve({message:t,comment:""})})):Promise.reject():Promise.resolve({message:wac_env.pending_msg,comment:o.get("comment")})})).catch((function(e){return Promise.resolve({message:wac_env.error_msg,comment:""})})).then((function(e){r.innerHTML="<p><small>"+e.message+"</small></p>"+e.comment})).finally((function(){document.getElementById("respond").before(r),document.getElementById("commentform").reset()}))})),r(e,"reset","#commentform",(function(e){var t;t=document.getElementById("respond"),document.getElementById("comment_parent").value="",document.getElementById("respond-anchor").before(t)})),"IntersectionObserver"in window){var n=new IntersectionObserver((function(e){e.forEach((e=>{e.isIntersecting&&(o(),n.unobserve(e.target))}))}));n.observe(e)}else o()}function o(){fetch(wac_env.ajaxurl+"?action=wac_load_comments&postID="+t).then((function(e){return e.ok&&e.text()})).then((function(t){e.innerHTML=t;var n=document.getElementById("respond"),o=document.getElementById("commentform").querySelector(".form-submit"),r=document.createElement("input");r.type="reset",r.value="Cancel";var m=document.createElement("div");m.id="respond-anchor",n.after(m),o.append(r)}))}function r(e,t,n,o){e.addEventListener(t,(function(e){e.target.matches(n)&&o(e)}))}}();
